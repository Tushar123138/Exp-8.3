<!DOCTYPE html>
<html>
<head>
<title>Role-Based Access Control Simulation</title>
<style>
body { font-family: Arial; margin: 30px; background: #f5f6fa; }
h2 { color: #2f3640; }
textarea, input, select { width: 100%; padding: 8px; margin-top: 8px; }
button { margin-top: 10px; padding: 8px 12px; background: #273c75; color: white; border: none; cursor: pointer; }
button:hover { background: #40739e; }
pre { background: #dcdde1; padding: 10px; border-radius: 5px; white-space: pre-wrap; }
</style>
</head>
<body>

<h2>Role-Based Access Control Simulation</h2>

<h3>Login</h3>
<label>Username:</label>
<input type="text" id="username" placeholder="e.g., adminUser">

<label>Password:</label>
<input type="password" id="password" placeholder="e.g., admin123">

<label>Role:</label>
<select id="role">
<option value="Admin">Admin</option>
<option value="Moderator">Moderator</option>
<option value="User">User</option>
</select>

<button onclick="login()">Login</button>

<h3>Simulated API Routes</h3>
<button onclick="accessRoute('admin-dashboard')">GET /admin-dashboard</button>
<button onclick="accessRoute('moderator-panel')">GET /moderator-panel</button>
<button onclick="accessRoute('user-profile')">GET /user-profile</button>

<h3>Response:</h3>
<pre id="output"></pre>

<script>
let token = null;
let userData = null;

function generateFakeJWT(payload) {
    return btoa(JSON.stringify(payload)) + "." + btoa("secretKey");
}

function login() {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();
    const role = document.getElementById("role").value;

    if (!username || !password) {
        document.getElementById("output").textContent = "Please enter username and password.";
        return;
    }

    userData = { id: 1, username, role };
    token = generateFakeJWT(userData);

    document.getElementById("output").textContent =
        `✅ Login Successful\nToken: ${token}\nRole: ${role}`;
}

function accessRoute(route) {
    if (!token) {
        document.getElementById("output").textContent = "❌ Please login first!";
        return;
    }

    let status = 200;
    let response = {};

    if (route === "admin-dashboard") {
        if (userData.role === "Admin") {
            response = { message: "Welcome to the Admin dashboard.", user: userData };
        } else {
            status = 403;
            response = { message: "Access denied: Admins only" };
        }
    }

    else if (route === "moderator-panel") {
        if (userData.role === "Moderator" || userData.role === "Admin") {
            response = { message: "Welcome to the Moderator panel.", user: userData };
        } else {
            status = 403;
            response = { message: "Access denied: Moderators only" };
        }
    }

    else if (route === "user-profile") {
        response = { message: `Welcome to your profile, ${userData.username}.`, user: userData };
    }

    document.getElementById("output").textContent =
        `GET /${route}\nStatus: ${status}\n\n` + JSON.stringify(response, null, 2);
}
</script>

</body>
</html>
